define("q",["require","exports","module"],function(a,b,c){function d(a){return function(){return $.apply(a,arguments)}}function e(a){return a===Object(a)}function f(a){return"[object StopIteration]"===gb(a)||a instanceof W}function g(a,b){if(T&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(ib)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+ib+"\n");a.stack=h(e)}}function h(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];k(e)||i(e)||!e||c.push(e)}return c.join("\n")}function i(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function j(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function k(a){var b=j(a);if(!b)return!1;var c=b[0],d=b[1];return c===V&&d>=X&&nb>=d}function l(){if(T)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=j(c);if(!d)return;return V=d[0],d[1]}}function m(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function n(a){return u(a)?a:v(a)?G(a):F(a)}function o(){function a(a){b=a,f.source=a,ab(c,function(b,c){Z(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=db(o.prototype),f=db(r.prototype);if(f.promiseDispatch=function(a,e,f){var g=_(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):Z(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=m(function(){if(c)return f;var a=t(b);return u(a)&&(b=a),a},"valueOf","inspect"),f.inspect=function(){return b?b.inspect():{state:"pending"}},n.longStackSupport&&T)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(n(c))},e.fulfill=function(c){b||a(F(c))},e.reject=function(c){b||a(E(c))},e.notify=function(a){b||ab(d,function(b,c){Z(function(){c(a)})},void 0)},e}function p(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=o();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function q(a){return p(function(b,c){for(var d=0,e=a.length;e>d;d++)n(a[d]).then(b,c)})}function r(a,b,c){void 0===b&&(b=function(a){return E(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=db(r.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=E(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=m(function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value})}return d}function s(a,b,c,d){return n(a).then(b,c,d)}function t(a){if(u(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function u(a){return e(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function v(a){return e(a)&&"function"==typeof a.then}function w(a){return u(a)&&"pending"===a.inspect().state}function x(a){return!u(a)||"fulfilled"===a.inspect().state}function y(a){return u(a)&&"rejected"===a.inspect().state}function z(){lb||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",jb),lb=!0}function A(){for(var a=0;a<jb.length;a++){var b=jb[a];b&&"undefined"!=typeof b.stack?console.warn("Unhandled rejection reason:",b.stack):console.warn("Unhandled rejection reason (no stack):",b)}}function B(){jb.length=0,kb.length=0,lb=!1,mb||(mb=!0,"undefined"!=typeof process&&process.on&&process.on("exit",A))}function C(a,b){mb&&(kb.push(a),jb.push(b),z())}function D(a){if(mb){var b=bb(kb,a);-1!==b&&(kb.splice(b,1),jb.splice(b,1))}}function E(a){var b=r({when:function(b){return b&&D(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return C(b,a),b}function F(a){return r({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return fb(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function G(a){var b=o();return Z(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function H(a){return r({isDef:function(){}},function(b,c){return N(a,b,c)},function(){return n(a).inspect()})}function I(a,b,c){return n(a).spread(b,c)}function J(a){return function(){function b(a,b){var g;if(hb){try{g=c[a](b)}catch(h){return E(h)}return g.done?g.value:s(g.value,d,e)}try{g=c[a](b)}catch(h){return f(h)?h.value:E(h)}return s(g,d,e)}var c=a.apply(this,arguments),d=b.bind(b,"next"),e=b.bind(b,"throw");return d()}}function K(a){n.done(n.async(a)())}function L(a){throw new W(a)}function M(a){return function(){return I([this,O(arguments)],function(b,c){return a.apply(b,c)})}}function N(a,b,c){return n(a).dispatch(b,c)}function O(a){return s(a,function(a){var b=0,c=o();return ab(a,function(d,e,f){var g;u(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,s(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function P(a){return s(a,function(a){return a=cb(a,n),s(O(cb(a,function(a){return s(a,Y,Y)})),function(){return a})})}function Q(a){return s(a,function(a){return O(cb(a,function(b,c){return s(b,function(b){return a[c]={state:"fulfilled",value:b},a[c]},function(b){return a[c]={state:"rejected",reason:b},a[c]})})).thenResolve(a)})}function R(a,b){return n(a).then(void 0,void 0,b)}function S(a,b){return n(a).nodeify(b)}var T=!1;try{throw new Error}catch(U){T=!!U.stack}var V,W,X=l(),Y=function(){},Z=function(){function a(){for(;b.next;){b=b.next;var c=b.task;b.task=void 0;var e=b.domain;e&&(b.domain=void 0,e.enter());try{c()}catch(g){if(f)throw e&&e.exit(),setTimeout(a,0),e&&e.enter(),g;setTimeout(function(){throw g},0)}e&&e.exit()}d=!1}var b={task:void 0,next:null},c=b,d=!1,e=void 0,f=!1;if(Z=function(a){c=c.next={task:a,domain:f&&process.domain,next:null},d||(d=!0,e())},"undefined"!=typeof process&&process.nextTick)f=!0,e=function(){process.nextTick(a)};else if("function"==typeof setImmediate)e="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var g=new MessageChannel;g.port1.onmessage=a,e=function(){g.port2.postMessage(0)}}else e=function(){setTimeout(a,0)};return Z}(),$=Function.call,_=d(Array.prototype.slice),ab=d(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),bb=d(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),cb=d(Array.prototype.map||function(a,b){var c=this,d=[];return ab(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),db=Object.create||function(a){function b(){}return b.prototype=a,new b},eb=d(Object.prototype.hasOwnProperty),fb=Object.keys||function(a){var b=[];for(var c in a)eb(a,c)&&b.push(c);return b},gb=d(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var hb;try{new Function("(function* (){ yield 1; })"),hb=!0}catch(U){hb=!1}var ib="From previous event:";n.resolve=n,n.nextTick=Z,n.longStackSupport=!1,n.defer=o,o.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(_(arguments,1)):a.resolve(c)}},n.promise=p,n.passByCopy=function(a){return a},r.prototype.passByCopy=function(){return this},n.join=function(a,b){return n(a).join(b)},r.prototype.join=function(a){return n([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},n.race=q,r.prototype.race=function(){return this.then(n.race)},n.makePromise=r,r.prototype.toString=function(){return"[object Promise]"},r.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return E(c)}}function e(a){if("function"==typeof b){g(a,h);try{return b(a)}catch(c){return E(c)}}return E(a)}function f(a){return"function"==typeof c?c(a):a}var h=this,i=o(),j=!1;return Z(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(e(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=f(a)}catch(d){if(c=!0,!n.onerror)throw d;n.onerror(d)}c||i.notify(b)}]),i.promise},n.when=s,r.prototype.thenResolve=function(a){return this.then(function(){return a})},n.thenResolve=function(a,b){return n(a).thenResolve(b)},r.prototype.thenReject=function(a){return this.then(function(){throw a})},n.thenReject=function(a,b){return n(a).thenReject(b)},n.nearer=t,n.isPromise=u,n.isPromiseAlike=v,n.isPending=w,r.prototype.isPending=function(){return"pending"===this.inspect().state},n.isFulfilled=x,r.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},n.isRejected=y,r.prototype.isRejected=function(){return"rejected"===this.inspect().state};var jb=[],kb=[],lb=!1,mb=!0;n.resetUnhandledRejections=B,n.getUnhandledReasons=function(){return jb.slice()},n.stopUnhandledRejectionTracking=function(){B(),"undefined"!=typeof process&&process.on&&process.removeListener("exit",A),mb=!1},B(),n.reject=E,n.fulfill=F,n.master=H,n.spread=I,r.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},n.async=J,n.spawn=K,n["return"]=L,n.promised=M,n.dispatch=N,r.prototype.dispatch=function(a,b){var c=this,d=o();return Z(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},n.get=function(a,b){return n(a).dispatch("get",[b])},r.prototype.get=function(a){return this.dispatch("get",[a])},n.set=function(a,b,c){return n(a).dispatch("set",[b,c])},r.prototype.set=function(a,b){return this.dispatch("set",[a,b])},n.del=n["delete"]=function(a,b){return n(a).dispatch("delete",[b])},r.prototype.del=r.prototype["delete"]=function(a){return this.dispatch("delete",[a])},n.mapply=n.post=function(a,b,c){return n(a).dispatch("post",[b,c])},r.prototype.mapply=r.prototype.post=function(a,b){return this.dispatch("post",[a,b])},n.send=n.mcall=n.invoke=function(a,b){return n(a).dispatch("post",[b,_(arguments,2)])},r.prototype.send=r.prototype.mcall=r.prototype.invoke=function(a){return this.dispatch("post",[a,_(arguments,1)])},n.fapply=function(a,b){return n(a).dispatch("apply",[void 0,b])},r.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},n["try"]=n.fcall=function(a){return n(a).dispatch("apply",[void 0,_(arguments,1)])},r.prototype.fcall=function(){return this.dispatch("apply",[void 0,_(arguments)])},n.fbind=function(a){var b=n(a),c=_(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(_(arguments))])}},r.prototype.fbind=function(){var a=this,b=_(arguments);return function(){return a.dispatch("apply",[this,b.concat(_(arguments))])}},n.keys=function(a){return n(a).dispatch("keys",[])},r.prototype.keys=function(){return this.dispatch("keys",[])},n.all=O,r.prototype.all=function(){return O(this)},n.allResolved=m(P,"allResolved","allSettled"),r.prototype.allResolved=function(){return P(this)},n.allSettled=Q,r.prototype.allSettled=function(){return Q(this)},n.fail=n["catch"]=function(a,b){return n(a).then(void 0,b)},r.prototype.fail=r.prototype["catch"]=function(a){return this.then(void 0,a)},n.progress=R,r.prototype.progress=function(a){return this.then(void 0,void 0,a)},n.fin=n["finally"]=function(a,b){return n(a)["finally"](b)},r.prototype.fin=r.prototype["finally"]=function(a){return a=n(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},n.done=function(a,b,c,d){return n(a).done(b,c,d)},r.prototype.done=function(a,b,c){var d=function(a){Z(function(){if(g(a,e),!n.onerror)throw a;n.onerror(a)})},e=a||b||c?this.then(a,b,c):this;"object"==typeof process&&process&&process.domain&&(d=process.domain.bind(d)),e.then(void 0,d)},n.timeout=function(a,b,c){return n(a).timeout(b,c)},r.prototype.timeout=function(a,b){var c=o(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},n.delay=function(a,b){return void 0===b&&(b=a,a=void 0),n(a).delay(b)},r.prototype.delay=function(a){return this.then(function(b){var c=o();return setTimeout(function(){c.resolve(b)},a),c.promise})},n.nfapply=function(a,b){return n(a).nfapply(b)},r.prototype.nfapply=function(a){var b=o(),c=_(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},n.nfcall=function(a){var b=_(arguments,1);return n(a).nfapply(b)},r.prototype.nfcall=function(){var a=_(arguments),b=o();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},n.nfbind=n.denodeify=function(a){var b=_(arguments,1);return function(){var c=b.concat(_(arguments)),d=o();return c.push(d.makeNodeResolver()),n(a).fapply(c).fail(d.reject),d.promise}},r.prototype.nfbind=r.prototype.denodeify=function(){var a=_(arguments);return a.unshift(this),n.denodeify.apply(void 0,a)},n.nbind=function(a,b){var c=_(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(_(arguments)),f=o();return e.push(f.makeNodeResolver()),n(d).fapply(e).fail(f.reject),f.promise}},r.prototype.nbind=function(){var a=_(arguments,0);return a.unshift(this),n.nbind.apply(void 0,a)},n.nmapply=n.npost=function(a,b,c){return n(a).npost(b,c)},r.prototype.nmapply=r.prototype.npost=function(a,b){var c=_(b||[]),d=o();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},n.nsend=n.nmcall=n.ninvoke=function(a,b){var c=_(arguments,2),d=o();return c.push(d.makeNodeResolver()),n(a).dispatch("post",[b,c]).fail(d.reject),d.promise},r.prototype.nsend=r.prototype.nmcall=r.prototype.ninvoke=function(a){var b=_(arguments,1),c=o();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},n.nodeify=S,r.prototype.nodeify=function(a){return a?(this.then(function(b){Z(function(){a(null,b)})},function(b){Z(function(){a(b)})}),void 0):this},c.exports=n;var nb=l()});